<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Amigo Secreto ä¸€è¦§</title>
<style>
body { text-align:center; font-family:"Noto Sans JP",sans-serif; background:#fffaf5; color:#333; }
h1 { margin-top:1.2em; color:#e44; }
ul { list-style:none; padding:0; max-width:500px; margin:0 auto; }
li { background:white; border-radius:12px; margin:8px 0; padding:12px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
a { text-decoration:none; color:#e44; font-weight:bold; }
a:hover { text-decoration:underline; }
form { margin:20px auto; max-width:400px; display:flex; justify-content:center; gap:10px; }
input { flex:1; padding:8px; border-radius:6px; border:1px solid #aaa; }
button { background:#e44; color:white; border:none; border-radius:6px; padding:8px 16px; cursor:pointer; }
button:hover { background:#c22; }
</style>
</head>
<body>
<h1>ğŸ Amigo Secreto æŠ½é¸çµæœãƒªãƒ³ã‚¯ä¸€è¦§ ğŸ</h1>
<form id="addForm">
<input type="text" id="nameInput" placeholder="åå‰ã‚’å…¥åŠ›" required>
<button type="submit">è¿½åŠ </button>
</form>
<ul id="list"></ul>
<script>
async function loadList() {
	const res = await fetch("/api/list");
	const data = await res.json();
	const ul = document.getElementById("list");
	ul.innerHTML = '';
	if (data.length === 0) {
		ul.innerHTML = '<li>ã¾ã å‚åŠ è€…ã¯ã„ã¾ã›ã‚“ã€‚</li>';
		return;
	}
	data.forEach(p => {
		const li = document.createElement('li');
		li.innerHTML = `${p.name} ã•ã‚“ â†’ <a href="${p.link}" target="_blank">çµæœã‚’è¦‹ã‚‹</a>`;
		ul.appendChild(li);
	});
}
document.getElementById("addForm").addEventListener("submit", async e => {
	e.preventDefault();
	const name = document.getElementById("nameInput").value.trim();
	if (!name) return alert("åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
	const res = await fetch("/api/add", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ name }) });
	if (!res.ok) {
		const text = await res.text();
		alert("è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ: " + text);
		return;
	}
	document.getElementById("nameInput").value = "";
	await loadList();
});
loadList();
</script>
</body>
</html>
